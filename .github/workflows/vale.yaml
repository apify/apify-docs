name: Linting Workflow

on: [pull_request]

env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    # Get changed files
    - uses: tj-actions/changed-files@v40
      id: changed_files
      with:
        files: |
            README.md
            CONTRIBUTING.md
            sources/*

    # Run Vale only if specified files are changed
    - name: Run Vale Linter
      if: steps.changed_files.outputs.any_changed == 'true'
      uses: errata-ai/vale-action@reviewdog
      with:
        files: ${{ steps.changed_files.outputs.any_changed }}
