# Triggers deployment of the Nginx reverse proxy configuration for docs.apify.com
# when the configuration file is updated in this repository.
name: Deploy Nginx Configuration

on:
  push:
    branches:
      - master
    paths:
      - 'nginx.conf'
  workflow_dispatch:

jobs:
  trigger-deployment:
    name: Trigger Nginx deployment
    runs-on: ubuntu-latest
    steps:
      - name: Trigger deployment workflow in apify-docs-private
        run: |
          gh workflow run deploy-nginx.yaml \
            --repo apify/apify-docs-private \
            --field deployment=apify-docs
          echo "âœ… Deployment workflow triggered successfully"
        env:
          GITHUB_TOKEN: ${{ secrets.APIFY_SERVICE_ACCOUNT_GITHUB_TOKEN }}
